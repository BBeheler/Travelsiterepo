<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Destination Station</title>

  <!-- External CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

<!-- NAVBAR -->
<nav>
  <div class="nav-links">
    <a href="index.html">Home</a>
    <a href="about.html">About Us</a>
    <a href="contact.html">Contact Us</a>
  </div>

  <div class="nav-search">
    <input type="text" id="searchInput" placeholder="Search destinations...">
    <button id="searchBtn">Search</button>
  </div>
</nav>

<!-- HEADER -->
<header>
  <h1>Explore the World with Destination Station</h1>
  <p>Discover top destinations, beaches, temples, and countries worldwide.</p>
</header>

<!-- RECOMMENDATIONS HEADING -->
<section style="text-align:center; padding: 30px 0;">
  <h2 style="color:#1e90ff; font-size:2rem; margin:0;">
    Check out our recommendations below
  </h2>
</section>

<!-- FEATURED DESTINATIONS (ONLY 4) -->
<section class="destination-grid" id="destinationGrid"></section>

<!-- SEARCH RESULTS -->
<section id="searchResults" style="display:none;">
  <h2 style="text-align:center; color:#1e90ff;">Search Results</h2>
  <div id="resultsGrid" class="destination-grid"></div>
</section>

<!-- FOOTER -->
<footer>
  &copy; 2026 Destination Station. All rights reserved.
</footer>

<!-- JAVASCRIPT -->
<script>
  let allDestinations = [];

  async function loadDestinations() {
    try {
      const response = await fetch('api.json');
      const data = await response.json();

      // Flatten all destinations
      data.countries.forEach(country =>
        country.cities.forEach(city => allDestinations.push(city))
      );
      allDestinations.push(...data.temples);
      allDestinations.push(...data.beaches);

      // Show ONLY first 4 on homepage
      const featured = allDestinations.slice(0, 4);
      const grid = document.getElementById('destinationGrid');

      featured.forEach(dest => {
        const card = document.createElement('div');
        card.className = 'destination-card';
        card.innerHTML = `
          <img src="${dest.imageUrl}" alt="${dest.name}">
          <h3>${dest.name}</h3>
          <p>${dest.description}</p>
        `;
        grid.appendChild(card);
      });

    } catch (error) {
      console.error('Error loading destinations:', error);
    }
  }

  loadDestinations();

  /* SEARCH FUNCTION */
  const searchBtn = document.getElementById("searchBtn");
  const searchInput = document.getElementById("searchInput");
  const searchResults = document.getElementById("searchResults");
  const resultsGrid = document.getElementById("resultsGrid");

  searchBtn.addEventListener("click", function () {
    const query = searchInput.value.trim().toLowerCase();
    resultsGrid.innerHTML = "";

    if (!query) {
      alert("Please enter a search term.");
      return;
    }

    const matches = allDestinations.filter(dest =>
      dest.name.toLowerCase().includes(query) ||
      dest.description.toLowerCase().includes(query)
    );

    if (matches.length === 0) {
      resultsGrid.innerHTML = "<p style='text-align:center;'>No results found.</p>";
    } else {
      matches.forEach(dest => {
        const card = document.createElement("div");
        card.className = "destination-card";
        card.innerHTML = `
          <img src="${dest.imageUrl}" alt="${dest.name}">
          <h3>${dest.name}</h3>
          <p>${dest.description}</p>
        `;
        resultsGrid.appendChild(card);
      });
    }

    searchResults.style.display = "block";
  });
</script>

</body>
</html>
